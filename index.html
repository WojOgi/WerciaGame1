<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Number Stack Puzzle</title>
<style>
  body { font-family: sans-serif; text-align:center; background:#eef; }
  h1 { margin-top:20px; }
  #board { display:flex; justify-content:center; gap:20px; margin:40px auto; }
  .stack {
    width:70px; height:200px; background:#222; border-radius:8px;
    display:flex; flex-direction:column-reverse; justify-content:flex-start;
    align-items:center; padding:5px; color:#fff; cursor:pointer;
  }
  .disk {
    width:50px; height:25px; background:#0af; border-radius:4px; 
    margin:2px 0; line-height:25px; font-weight:bold;
  }
  .selected { outline:4px solid yellow; }
  #target { display:flex; justify-content:center; gap:20px; margin-top:30px; }
  .targetStack {
    width:70px; height:200px; background:#ccc; border-radius:8px;
    display:flex; flex-direction:column-reverse; justify-content:flex-start;
    align-items:center; padding:5px; color:#000;
  }
  #message { font-size:1.2em; margin-top:20px; }
</style>
</head>
<body>

<h1>ðŸ§® Number Stack Puzzle</h1>
<p>Goal: Rearrange the stacks from the "8" shape to match the target "5".<br>
Click a stack to <b>pick up</b> the top piece, then click another to <b>drop</b> it.</p>

<div id="board"></div>

<h2>Target (Number 5)</h2>
<div id="target"></div>

<div id="message"></div>

<script>
/* ---------- GAME STATE ---------- */
const startConfig = [ [1], [1,2], [1], [2,1], [1] ];  // roughly "8"
const targetConfig = [ [2], [1,3], [3], [1], [2] ];   // "5" example
let stacks = JSON.parse(JSON.stringify(startConfig));
let holding = null;   // holds picked disk
let fromStack = null;

/* ---------- DOM SETUP ---------- */
const board = document.getElementById('board');
const targetDiv = document.getElementById('target');
const msg = document.getElementById('message');

function render() {
  board.innerHTML = '';
  stacks.forEach((stack, i) => {
    const sDiv = document.createElement('div');
    sDiv.className = 'stack';
    sDiv.dataset.index = i;
    stack.forEach(v => {
      const d = document.createElement('div');
      d.className = 'disk';
      d.textContent = v;
      sDiv.appendChild(d);
    });
    if (i === fromStack) sDiv.classList.add('selected');
    sDiv.addEventListener('click', () => handleClick(i));
    board.appendChild(sDiv);
  });
}

function renderTarget() {
  targetDiv.innerHTML = '';
  targetConfig.forEach(stack => {
    const sDiv = document.createElement('div');
    sDiv.className = 'targetStack';
    stack.forEach(v => {
      const d = document.createElement('div');
      d.className = 'disk';
      d.textContent = v;
      sDiv.appendChild(d);
    });
    targetDiv.appendChild(sDiv);
  });
}

/* ---------- LOGIC ---------- */
function handleClick(i) {
  if (holding === null) {
    // pick up
    if (stacks[i].length === 0) return;
    holding = stacks[i].pop();
    fromStack = i;
  } else {
    // drop
    stacks[i].push(holding);
    holding = null;
    fromStack = null;
    checkWin();
  }
  render();
}

function checkWin() {
  const equal = JSON.stringify(stacks) === JSON.stringify(targetConfig);
  if (equal) msg.textContent = 'âœ… You made the number 5! Well done!';
  else msg.textContent = '';
}

/* ---------- INIT ---------- */
render();
renderTarget();
</script>
</body>
</html>
